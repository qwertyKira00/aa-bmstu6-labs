Для параллельного вычисления нужно знать:
1. Запрещена одновременная запись разными потоками в одну ячейку памяти (мьютекс - объект, который можно захватить)
В C++:
lock(m) //блокировка
{
//критическая работа в монопольном режиме. Например, можно получить доступ к переменной
}
Пример из алгоритма Винограда:
for
{
    for
    {
        buf = -mult1[i] - mult2[j]
	for
	{
	    buf += ...
	}
    C[i][j] = buf
    }
}

Накопление БУФЕРА - это оправданный подход в параллельном программировании

2. Иногда нужна "точка сборки", чтобы агрегировать результат перед следующими вычислениями
В C++: массив семафоров
Главный поток создает потоки (мб массив потоков), массив сброшенных семафоров; запускает рабочие потоки.
Уходит в цикл ожидания на массиве семафоров- ожидания завершения работы всех рабочих потоков (WaitForAll(s)) или хотя бы одного рабочего потока. (WaitForAny(s) - чаще используется для решения M задач N потоками, M > N)
Код всегда должен завершаться в рабочем потоке, чтобы не было зацикливания.

3. Данные могут устаревать
Пример: найти максимум в 3 потока
Пусть 3й поток первым завершился (массив из 11 элементов: (4, 4, 3))
maxГлобальный = maxЛокальный
Делегат - это указатель на метод с заданной сигнатурой 
//событие(event) - это многоадресный делегат
Конструктор потока аргументом делегат, а при запуске поток получает в аргументах область ответственности (например, зона строк, которую должен обработать определенный поток)
Делегат - это предписание, задание (что нужно сделать)

ЛР4
Ограничения на языки: нужно использовать нативные потоки
Задача: придумать 2 схемы параллельных вычислений одного и того же алгоритма (z-буфер, ray tracing) + исходная последовательная версия алгоритма. Не описывать параллельные вычисления в блок-схеме. Вместо этого схема главного потока и схема рабочего потока. Сравнить по времени. Каждый на 1, 2, 4, ..., 4 * M рабочих потоков, гле M - это количество логических ядер на вашей ЭВМ. Проанализировать, всегда ли происходят снижения затраченного времени при увеличении числа потоков. Серия экспериментов с одинаковым числом потоков - это не менее 5 точек на графике.
